for(var line={0:4,1:2,2:4,3:2},i=0;i<4;i++)if(line[i])for(var row=i;row>0;)if(line[row-1]){if(line[row-1]!=line[row])break;line[row-1]*=2,line[row]=0}else line[row-1]=line[row],line[row]=0,row--;console.log(line);